<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Übung: Kanton als JSON laden und im Browserfenster anzeigen - Lösung</title>
  </head>
  <body style="background: #e2fead;">
    <h1>Übung: Kanton als JSON laden und im Browserfenster anzeigen - Lösung</h1>
    <div id="container">

    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function(event) {

        fetch('extern/kanton1.json')
          .then((response) => {
            // Definieren, welches Format die Antwort hat (wichtig für den nächsten Teil)
            // !!!!! hier JSON !!!!!!
            return response.json();
          })
          .then((data) => {
            kanton_anzeigen(data);
          })
          .catch(function(error) {
            console.log('Error: ' + error.message);
          });

          function kanton_anzeigen(kanton_param){
          // Der Funktionsparameter "kanton_param" enthält jetzt das übergebene Objekt (hier: "kanton1")

          // HTML-Struktur innerhalb von JS erzeugen
            let kanton_anzeige = document.createElement('ul');
            let kanton_name = document.createElement('li');
            kanton_anzeige.appendChild(kanton_name);
            let kanton_sprache = document.createElement('li');
            kanton_anzeige.appendChild(kanton_sprache);
            let kanton_hauptort = document.createElement('li');
            kanton_anzeige.appendChild(kanton_hauptort);
            let kanton_flaeche = document.createElement('li');
            kanton_anzeige.appendChild(kanton_flaeche);
            let kanton_einwohner = document.createElement('li');
            kanton_anzeige.appendChild(kanton_einwohner);
            let kanton_quote = document.createElement('li');
            kanton_anzeige.appendChild(kanton_quote);


          // Informationen sammeln und aufbereiten
            let sprache_liste = document.createElement('ul');
            for(let i = 0; i < kanton_param.amtssprache.length; i++){
              let sprach_listenpunkt = document.createElement('li');
              sprach_listenpunkt.textContent = kanton_param.amtssprache[i];
              sprache_liste.appendChild(sprach_listenpunkt);
            }

          // Informationen in HTML-Elemente schreiben
            kanton_name.textContent = "Kantonsname: " + kanton_param.name;
            kanton_sprache.textContent = "Amtsprachen: ";
            kanton_sprache.appendChild(sprache_liste);
            kanton_hauptort.textContent = "Hauptort: " + kanton_param.hauptort;
            kanton_flaeche.textContent = "Fläche: " + kanton_param.flaeche;
            kanton_einwohner.textContent = "Einwohner: " + kanton_param.bevoelkerung.einwohner;
            kanton_quote.textContent = "Arbeitslosenquote: " + kanton_param.bevoelkerung.quote;

            // !!!!!!! return person_anzeige;
            let html_container = document.querySelector('#container');
            html_container.appendChild(kanton_anzeige);
          }
      });
    </script>
  </body>
</html>
