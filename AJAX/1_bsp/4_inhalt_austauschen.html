<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Inhalte mit Ajax austauschen</title>
  </head>
  <body>
    <div id="container">
      <div class="buttons">
        <button class="btn" data-dateiname="html_person1">Urs Thöny</button><br>
        <button class="btn" data-dateiname="html_person2">Alina Weisser</button><br>
      </div>
      <div id="anzeige">

      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function(event) {

        // Das DOM-Element mit der id "anzeige" wirs in der variablen "anzeige" gespeichert.
        let anzeige = document.querySelector('#anzeige');

        // Eine Liste (Array) mit allen Elementen mit der class "btn" wird in der Variablen "buttons" gespeichert.
        let buttons = document.querySelectorAll('.btn');
        // Die Liste "buttons" wird in einer Schleife durchlaufen.
        for(let i = 0; i < buttons.length; i++){
          // Jedem Listen-Element (jedem Button) wird ein Click-EventListener zugeordnet.
          buttons[i].addEventListener("click", function(){
            // Kontrolle:
            console.log(this.getAttribute("data-dateiname"));
            // Beim Click auf den Button wird die Funktion zeige_externen_inhalt() Aufgerufen.
            // Als Parameter wird der Inhalt des data-dateiname-Attributs, des jeweiligen Buttons mitgegeben.
            //    (Dateiname ohne Extension)
            zeige_externen_inhalt(this.getAttribute("data-dateiname"));
          })
        }

        // Um flexibler arbeiten zu können, packen wir den fetch()-Aufruf in eine Funktion
        // Als Parameter wird der Inhalt ein Dateiname ohne Extension mitgegeben.
        // Funktionsstart
        function zeige_externen_inhalt(dateiname){
          // Der Pfad zur externen Datei wird dem Ordnernamen, dem Parameter "dateiname" und der Extension zusammengesetzt.
          let url = "extern/" + dateiname + ".txt";
          fetch(url)
            .then((response) => {
              return response.text();
            })
            .then((data) => {
              anzeige.innerHTML = data;
            })
            .catch(function(error) {
              console.log('Error: ' + error.message);
            });
        // Funktionsende
        }

      });
    </script>
  </body>
</html>
